<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

<!-- 자취게시판 by 김여울 -->


	<entry key="selectListCount">
		SELECT *
		FROM BOARD
		WHERE STATUS = 'Y'
		AND BOARD_NAME = '자취레시피'
	</entry>
	

	<entry key="selectList">
	SELECT *
	FROM   (SELECT ROWNUM RNUM,A.*
			     FROM    (SELECT BOARD_NO, NICKNAME, BOARD_TITLE, CATEGORY, COUNT, CREATE_DATE, BOARDLIKE_NO
			                FROM BOARD B
			                JOIN MEMBER M ON (B.BOARD_WRITER = M.USER_NO)
			                JOIN BOARD_LIKE L ON (BOARD_NO = L.BOARDLIKE_NO)
			                WHERE BOARD_NAME = '자취레시피'
			                AND B.STATUS = 'Y') A)
	WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	
	<entry key="selectListByKeyword">
    SELECT *
    FROM (
        SELECT ROWNUM RNUM, A.*
        FROM (
            SELECT BOARD_NO, NICKNAME, BOARD_TITLE, CATEGORY, COUNT, CREATE_DATE, BOARDLIKE_NO
            FROM BOARD B
            JOIN MEMBER M ON (B.BOARD_WRITER = M.USER_NO)
            JOIN BOARD_LIKE L ON (BOARD_NO = L.BOARDLIKE_NO)
            WHERE BOARD_NAME = '자취레시피'
            AND B.STATUS = 'Y'
            AND (BOARD_TITLE LIKE '%' || ? || '%'
            OR NICKNAME LIKE '%' || ? || '%')
        ) A
    ) 
    WHERE RNUM BETWEEN ? AND ?
	</entry>


	<!-- 동네소식 총 게시글 개수 구하기 -->
	<entry key="newsSelectListCount">
		SELECT COUNT(*) COUNT
		FROM BOARD
		WHERE STATUS = 'Y'
		AND BOARD_NAME = '동네 소식' 
	</entry>

	<!-- 동네소식 리스트 불러오기(아직 좋아요 카운트 안불러옴) -->
	<entry key="newsSelectList">
		SELECT *
		FROM (SELECT ROWNUM RNUM, A.*
        		FROM (SELECT BOARD_NO, BOARD_TITLE, NICKNAME, CREATE_DATE, COUNT
		        		FROM BOARD B
		        		JOIN MEMBER M ON (BOARD_WRITER = USER_NO)
		        		WHERE B.STATUS ='Y'
		        		ORDER BY BOARD_NO DESC) A )
		WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	<!-- 조회수  -->
	<entry key="newsIncreaseCount">
		UPDATE BOARD
		SET COUNT = COUNT +1
		WHERE BOARD_NO = ?
		AND STATUS = 'Y'
	</entry>
	
	<!-- 동네 소식 게시글 하나 정보 조회하기 -->
	<entry key="selectNews">
		SELECT BOARD_NO, BOARD_TITLE, NICKNAME, CREATE_DATE, BOARD_CONTENT
		FROM BOARD B
		JOIN MEMBER M ON (BOARD_WRITER = USER_NO)
		WHERE B.STATUS = 'Y'
		AND BOARD_NAME = '동네 소식'
		AND BOARD_NO = ?
	</entry>
	
	<!-- 동네소식 첨푸파일 조회 -->
	<entry key="selectNewsAttachment">
		SELECT FILE_NO, ORIGIN_NAME, CHANGE_NAME, FILE_PATH
		FROM ATTACHMENT
		WHERE REF_BNO = ?
	</entry>
	
	<!-- 동네소식 댓글 작성 -->
	<entry key="newsInsertReply">
		INSERT INTO REPLY(REPLY_NO, REPLY_CONTENT, REF_BNO, REPLY_WRITER)
		VALUES(SEQ_RNO.NEXTVAL,?,?,?)
	</entry>
	
	<!-- 동네소식 댓글 목록 조회 -->
	<entry key="newsSelectReply">
		SELECT REPLY_NO, REPLY_CONTENT, REF_BNO, NICKNAME, TO_CHAR(CREATE_DATE, 'YYYY-MM-DD') CREATE_DATE
		FROM REPLY R
		JOIN MEMBER M ON(REPLY_WRITER = USER_NO)
		WHERE R.STATUS = 'Y'
		AND REF_BNO = ?
		ORDER BY CREATE_DATE DESC
	</entry>
	
	<!-- 동네 소식 댓글 삭제 -->
	<entry key="newsDeleteReply">
		UPDATE REPLY
		SET STATUS = 'N'
		WHERE REPLY_NO = ?
		AND STATUS = 'Y'
	</entry>
	
	<!-- 동네 소식 댓글 수정 -->
	<entry key="newsUpdateReply">
		UPDATE REPLY
		SET REPLY_CONTENT = ?
			,MODIFY_DATE = SYSDATE
		WHERE REPLY_NO = ?
	</entry>
</properties>